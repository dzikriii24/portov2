import{R as J,r as d,j as n}from"./index-BOSoLkZm.js";const G="radial-gradient(farthest-side circle at var(--pointer-x) var(--pointer-y),hsla(0,0%,90%,var(--card-opacity)) 4%,hsla(0,0%,80%,calc(var(--card-opacity)*0.75)) 10%,hsla(0,0%,70%,calc(var(--card-opacity)*0.5)) 50%,hsla(0,0%,60%,0) 100%),radial-gradient(35% 52% at 55% 20%,#cccccc88 0%,#00000000 100%),radial-gradient(100% 100% at 50% 50%,#ddddddff 1%,#00000000 76%),conic-gradient(from 124deg at 50% 50%,#aaaaaaff 0%,#888888ff 40%,#888888ff 60%,#aaaaaaff 100%)",K="linear-gradient(145deg,#9999998c 0%,#bbbbbb44 100%)",N={SMOOTH_DURATION:600,INITIAL_DURATION:1500,INITIAL_X_OFFSET:70,INITIAL_Y_OFFSET:60,DEVICE_BETA_OFFSET:20},O=(a,i=0,u=100)=>Math.min(Math.max(a,i),u),C=(a,i=3)=>parseFloat(a.toFixed(i)),_=(a,i,u,I,A)=>C(I+(A-I)*(a-i)/(u-i)),Q=a=>a<.5?4*a*a*a:1-Math.pow(-2*a+2,3)/2,Z=({avatarUrl:a="<Placeholder for avatar URL>",iconUrl:i="<Placeholder for icon URL>",grainUrl:u="<Placeholder for grain URL>",behindGradient:I,innerGradient:A,showBehindGradient:D=!0,className:k="",enableTilt:L=!0,enableMobileTilt:$=!1,mobileTiltSensitivity:F=5,miniAvatarUrl:X,name:w="Javi A. Torres",title:Y="Software Engineer",handle:U="javicodes",status:q="Online",contactText:ee="Contact",showUserInfo:W=!0,onContactClick:P})=>{const v=d.useRef(null),h=d.useRef(null),r=d.useMemo(()=>{if(!L)return null;let e=null;const t=(s,l,p,E)=>{const m=p.clientWidth,g=p.clientHeight,o=O(100/m*s),f=O(100/g*l),x=o-50,R=f-50,y={"--pointer-x":`${o}%`,"--pointer-y":`${f}%`,"--background-x":`${_(o,0,100,35,65)}%`,"--background-y":`${_(f,0,100,35,65)}%`,"--pointer-from-center":`${O(Math.hypot(f-50,o-50)/50,0,1)}`,"--pointer-from-top":`${f/100}`,"--pointer-from-left":`${o/100}`,"--rotate-x":`${C(-(x/5))}deg`,"--rotate-y":`${C(R/4)}deg`};Object.entries(y).forEach(([T,j])=>{E.style.setProperty(T,j)})};return{updateCardTransform:t,createSmoothAnimation:(s,l,p,E,m)=>{const g=performance.now(),o=m.clientWidth/2,f=m.clientHeight/2,x=R=>{const y=R-g,T=O(y/s),j=Q(T),z=_(j,0,1,l,o),V=_(j,0,1,p,f);t(z,V,E,m),T<1&&(e=requestAnimationFrame(x))};e=requestAnimationFrame(x)},cancelAnimation:()=>{e&&(cancelAnimationFrame(e),e=null)}}},[L]),S=d.useCallback(e=>{const t=h.current,c=v.current;if(!t||!c||!r)return;const s=t.getBoundingClientRect();r.updateCardTransform(e.clientX-s.left,e.clientY-s.top,t,c)},[r]),H=d.useCallback(()=>{const e=h.current,t=v.current;!e||!t||!r||(r.cancelAnimation(),t.classList.add("active"),e.classList.add("active"))},[r]),M=d.useCallback(e=>{const t=h.current,c=v.current;!t||!c||!r||(r.createSmoothAnimation(N.SMOOTH_DURATION,e.offsetX,e.offsetY,t,c),c.classList.remove("active"),t.classList.remove("active"))},[r]),b=d.useCallback(e=>{const t=h.current,c=v.current;if(!t||!c||!r)return;const{beta:s,gamma:l}=e;!s||!l||r.updateCardTransform(t.clientHeight/2+l*F,t.clientWidth/2+(s-N.DEVICE_BETA_OFFSET)*F,t,c)},[r,F]);d.useEffect(()=>{if(!L||!r)return;const e=h.current,t=v.current;if(!e||!t)return;const c=S,s=H,l=M,p=b,E=()=>{!$||location.protocol!=="https:"||(typeof window.DeviceMotionEvent.requestPermission=="function"?window.DeviceMotionEvent.requestPermission().then(o=>{o==="granted"&&window.addEventListener("deviceorientation",p)}).catch(o=>console.error(o)):window.addEventListener("deviceorientation",p))};e.addEventListener("pointerenter",s),e.addEventListener("pointermove",c),e.addEventListener("pointerleave",l),e.addEventListener("click",E);const m=t.clientWidth-N.INITIAL_X_OFFSET,g=N.INITIAL_Y_OFFSET;return r.updateCardTransform(m,g,e,t),r.createSmoothAnimation(N.INITIAL_DURATION,m,g,e,t),()=>{e.removeEventListener("pointerenter",s),e.removeEventListener("pointermove",c),e.removeEventListener("pointerleave",l),e.removeEventListener("click",E),window.removeEventListener("deviceorientation",p),r.cancelAnimation()}},[L,$,r,S,H,M,b]);const B=d.useMemo(()=>({"--icon":i?`url(${i})`:"none","--grain":u?`url(${u})`:"none","--behind-gradient":D?I??G:"none","--inner-gradient":A??K}),[i,u,D,I,A]);return d.useCallback(()=>{P?.()},[P]),n.jsx("div",{ref:v,className:`pc-card-wrapper ${k}`.trim(),style:B,children:n.jsx("section",{ref:h,className:"pc-card",children:n.jsxs("div",{className:"pc-inside",children:[n.jsx("div",{className:"pc-shine"}),n.jsx("div",{className:"pc-glare"}),n.jsxs("div",{className:"pc-content pc-avatar-content",children:[n.jsx("img",{className:"avatar",src:a,alt:`${w||"User"} avatar`,loading:"lazy",onError:e=>{const t=e.target;t.style.display="none"}}),W&&n.jsx("div",{className:"pc-user-info",children:n.jsxs("div",{className:"pc-user-details",children:[n.jsx("div",{className:"pc-mini-avatar",children:n.jsx("img",{src:X||a,alt:`${w||"User"} mini avatar`,loading:"lazy",onError:e=>{const t=e.target;t.style.opacity="0.5",t.src=a}})}),n.jsxs("div",{className:"pc-user-text",children:[n.jsxs("div",{className:"pc-handle",children:["@",U]}),n.jsx("div",{className:"pc-status",children:q})]})]})})]}),n.jsx("div",{className:"pc-content",children:n.jsxs("div",{className:"pc-details",children:[n.jsx("h3",{children:w}),n.jsx("p",{children:Y})]})})]})})})},ne=J.memo(Z);export{ne as default};
