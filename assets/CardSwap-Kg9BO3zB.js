import{r as n,j as N,R as j}from"./index-B4XhehG7.js";import{g as w}from"./index-CH_iu5NA.js";const b=n.forwardRef(({customClass:r,...e},o)=>N.jsx("div",{ref:o,...e,className:`card ${r??""} ${e.className??""}`.trim()}));b.displayName="Card";const I=(r,e,o,m)=>({x:r*e,y:-r*o,z:-r*e*1.5,zIndex:m-r}),A=(r,e,o)=>w.set(r,{x:e.x,y:e.y,z:e.z,xPercent:-50,yPercent:-50,skewY:o,duration:.8,ease:"power2.inOut",overwrite:!0,transformOrigin:"center center",zIndex:e.zIndex,force3D:!0}),F=({width:r=500,height:e=400,cardDistance:o=60,verticalDistance:m=70,delay:y=4e3,pauseOnHover:E=!1,onCardClick:O,skewAmount:g=6,easing:C="elastic",children:h})=>{const s=C==="elastic"?{ease:"elastic.out(0.6,0.9)",durDrop:2,durMove:2,durReturn:2,promoteOverlap:.9,returnDelay:.05}:{ease:"power1.inOut",durDrop:.8,durMove:.8,durReturn:.8,promoteOverlap:.45,returnDelay:.2},v=n.useMemo(()=>n.Children.toArray(h),[h]),c=n.useMemo(()=>v.map(()=>j.createRef()),[v.length]),z=n.useRef(Array.from({length:v.length},(l,u)=>u)),R=n.useRef(null),f=n.useRef(),L=n.useRef(null);n.useEffect(()=>{const l=c.length;c.forEach((t,d)=>A(t.current,I(d,o,m,l),g));const u=()=>{if(z.current.length<2)return;const[t,...d]=z.current,p=c[t].current,a=w.timeline();R.current=a,a.to(p,{y:"+=500",duration:s.durDrop,ease:s.ease}),a.addLabel("promote",`-=${s.durDrop*s.promoteOverlap}`),d.forEach(($,M)=>{const k=c[$].current,i=I(M,o,m,c.length);a.set(k,{zIndex:i.zIndex},"promote"),a.to(k,{x:i.x,y:i.y,z:i.z,duration:s.durMove,ease:s.ease},`promote+=${M*.15}`)});const x=I(c.length-1,o,m,c.length);a.addLabel("return",`promote+=${s.durMove*s.returnDelay}`),a.call(()=>{w.set(p,{zIndex:x.zIndex})},void 0,"return"),a.set(p,{x:x.x,z:x.z},"return"),a.to(p,{y:x.y,duration:s.durReturn,ease:s.ease},"return"),a.call(()=>{z.current=[...d,t]})};if(u(),f.current=window.setInterval(u,y),E){const t=L.current,d=()=>{R.current?.pause(),clearInterval(f.current)},p=()=>{R.current?.play(),f.current=window.setInterval(u,y)};return t.addEventListener("mouseenter",d),t.addEventListener("mouseleave",p),()=>{t.removeEventListener("mouseenter",d),t.removeEventListener("mouseleave",p),clearInterval(f.current)}}return()=>clearInterval(f.current)},[o,m,y,E,g,C]);const S=v.map((l,u)=>n.isValidElement(l)?n.cloneElement(l,{key:u,ref:c[u],style:{width:r,height:e,...l.props.style??{}},onClick:t=>{l.props.onClick?.(t),O?.(u)}}):l);return N.jsx("div",{ref:L,className:"card-swap-container",style:{width:r,height:e},children:S})};export{b as Card,F as default};
