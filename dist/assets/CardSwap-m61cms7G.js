import{r as o,j as $,R as A}from"./index-DSGjgx8E.js";import{g as E}from"./index-C8pce-KX.js";const D=o.forwardRef(({customClass:t,...r},s)=>$.jsx("div",{ref:s,...r,className:`card ${t??""} ${r.className??""}`.trim()}));D.displayName="Card";const w=(t,r,s,m)=>({x:t*r,y:-t*s,z:-t*r*1.5,zIndex:m-t}),P=(t,r,s)=>E.set(t,{x:r.x,y:r.y,z:r.z,xPercent:-50,yPercent:-50,skewY:s,duration:.8,ease:"power2.inOut",overwrite:!0,transformOrigin:"center center",zIndex:r.zIndex,force3D:!0}),V=({width:t=500,height:r=400,cardDistance:s=60,verticalDistance:m=70,delay:i=4e3,pauseOnHover:g=!1,onCardClick:z,skewAmount:h=6,easing:L="elastic",children:M})=>{const a=L==="elastic"?{ease:"elastic.out(0.6,0.9)",durDrop:2,durMove:2,durReturn:2,promoteOverlap:.9,returnDelay:.05}:{ease:"power1.inOut",durDrop:.8,durMove:.8,durReturn:.8,promoteOverlap:.45,returnDelay:.2},v=o.useMemo(()=>o.Children.toArray(M),[M]),d=o.useMemo(()=>v.map(()=>A.createRef()),[v.length]),R=o.useRef(Array.from({length:v.length},(p,l)=>l)),I=o.useRef(null),f=o.useRef(),N=o.useRef(null);o.useEffect(()=>{const p=d.length;d.forEach((n,u)=>P(n.current,w(u,s,m,p),h));const l=()=>{if(R.current.length<2)return;const[n,...u]=R.current,c=d[n].current,e=E.timeline();I.current=e,e.to(c,{y:"+=500",duration:a.durDrop,ease:a.ease}),e.addLabel("promote",`-=${a.durDrop*a.promoteOverlap}`),u.forEach((b,O)=>{const S=d[b].current,y=w(O,s,m,d.length);e.set(S,{zIndex:y.zIndex},"promote"),e.to(S,{x:y.x,y:y.y,z:y.z,duration:a.durMove,ease:a.ease},`promote+=${O*.15}`)});const x=w(d.length-1,s,m,d.length);e.addLabel("return",`promote+=${a.durMove*a.returnDelay}`),e.call(()=>{E.set(c,{zIndex:x.zIndex})},void 0,"return"),e.set(c,{x:x.x,z:x.z},"return"),e.to(c,{y:x.y,duration:a.durReturn,ease:a.ease},"return"),e.call(()=>{R.current=[...u,n]})};if(l(),f.current=window.setInterval(l,i),g){const n=N.current,u=()=>{var e;(e=I.current)==null||e.pause(),clearInterval(f.current)},c=()=>{var e;(e=I.current)==null||e.play(),f.current=window.setInterval(l,i)};return n.addEventListener("mouseenter",u),n.addEventListener("mouseleave",c),()=>{n.removeEventListener("mouseenter",u),n.removeEventListener("mouseleave",c),clearInterval(f.current)}}return()=>clearInterval(f.current)},[s,m,i,g,h,L]);const j=v.map((p,l)=>o.isValidElement(p)?o.cloneElement(p,{key:l,ref:d[l],style:{width:t,height:r,...p.props.style??{}},onClick:n=>{var u,c;(c=(u=p.props).onClick)==null||c.call(u,n),z==null||z(l)}}):p);return $.jsx("div",{ref:N,className:"card-swap-container",style:{width:t,height:r},children:j})};export{D as Card,V as default};
